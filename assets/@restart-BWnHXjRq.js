import{r,j as m}from"./react-aeAZDBfZ.js";import{c as U,s as Q,o as xe,a as I,l as Y,b as Z}from"./dom-helpers-BsN-Z0DW.js";import{R as ye}from"./react-dom-HiLXpmph.js";function we(e){return e.code==="Escape"||e.keyCode===27}function ke(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function N(e){if(!e||typeof e=="function")return null;const{major:n}=ke();return n>=19?e.props.ref:e.ref}const ee=e=>!e||typeof e=="function"?e:n=>{e.current=n};function Ce(e,n){const t=ee(e),o=ee(n);return s=>{t&&t(s),o&&o(s)}}function tn(e,n){return r.useMemo(()=>Ce(e,n),[e,n])}function Oe(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e},[e]),n}function on(e){const n=Oe(e);return r.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function Me(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e},[e]),n}function g(e){const n=Me(e);return r.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function Te(){const e=r.useRef(!0),n=r.useRef(()=>e.current);return r.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),n.current}function je(e){const n=r.useRef(null);return r.useEffect(()=>{n.current=e}),n.current}const De=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Be=typeof document<"u",ne=Be||De?r.useLayoutEffect:r.useEffect;function Fe(e){const n=r.useRef(e);return n.current=e,n}function rn(e){const n=Fe(e);r.useEffect(()=>()=>n.current(),[])}const We="data-rr-ui-";function Se(e){return`${We}${e}`}const se=r.createContext(U?window:void 0);se.Provider;function H(){return r.useContext(se)}const te=e=>!e||typeof e=="function"?e:n=>{e.current=n};function Le(e,n){const t=te(e),o=te(n);return s=>{t&&t(s),o&&o(s)}}function K(e,n){return r.useMemo(()=>Le(e,n),[e,n])}function sn(){return r.useState(null)}function Ae(e){const n=r.useRef(e);return n.current=e,n}function Ie(e){const n=Ae(e);r.useEffect(()=>()=>n.current(),[])}function Pe(e=document){const n=e.defaultView;return Math.abs(n.innerWidth-e.documentElement.clientWidth)}const oe=Se("modal-open");class ie{constructor({ownerDocument:n,handleContainerOverflow:t=!0,isRTL:o=!1}={}){this.handleContainerOverflow=t,this.isRTL=o,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return Pe(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const t={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();n.style={overflow:s.style.overflow,[o]:s.style[o]},n.scrollBarWidth&&(t[o]=`${parseInt(Q(s,o)||"0",10)+n.scrollBarWidth}px`),s.setAttribute(oe,""),Q(s,t)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const t=this.getElement();t.removeAttribute(oe),Object.assign(t.style,n.style)}add(n){let t=this.modals.indexOf(n);return t!==-1||(t=this.modals.length,this.modals.push(n),this.setModalAttributes(n),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(n){const t=this.modals.indexOf(n);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const P=(e,n)=>U?e==null?(n||xe()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function $e(e,n){const t=H(),[o,s]=r.useState(()=>P(e,t==null?void 0:t.document));if(!o){const u=P(e);u&&s(u)}return r.useEffect(()=>{},[n,o]),r.useEffect(()=>{const u=P(e);u!==o&&s(u)},[e,o]),o}function Ue({children:e,in:n,onExited:t,mountOnEnter:o,unmountOnExit:s}){const u=r.useRef(null),l=r.useRef(n),d=g(t);r.useEffect(()=>{n?l.current=!0:d(u.current)},[n,d]);const f=K(u,N(e)),c=r.cloneElement(e,{ref:f});return n?c:s||!l.current&&o?null:c}const Ne=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function He(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function Ke(e){let{onEnter:n,onEntering:t,onEntered:o,onExit:s,onExiting:u,onExited:l,addEndListener:d,children:f}=e,c=He(e,Ne);const h=r.useRef(null),p=K(h,N(f)),E=R=>v=>{R&&h.current&&R(h.current,v)},C=r.useCallback(E(n),[n]),O=r.useCallback(E(t),[t]),M=r.useCallback(E(o),[o]),T=r.useCallback(E(s),[s]),j=r.useCallback(E(u),[u]),D=r.useCallback(E(l),[l]),x=r.useCallback(E(d),[d]);return Object.assign({},c,{nodeRef:h},n&&{onEnter:C},t&&{onEntering:O},o&&{onEntered:M},s&&{onExit:T},u&&{onExiting:j},l&&{onExited:D},d&&{addEndListener:x},{children:typeof f=="function"?(R,v)=>f(R,Object.assign({},v,{ref:p})):r.cloneElement(f,{ref:p})})}const _e=["component"];function Ge(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}const Ve=r.forwardRef((e,n)=>{let{component:t}=e,o=Ge(e,_e);const s=Ke(o);return m.jsx(t,Object.assign({ref:n},s))});function ze({in:e,onTransition:n}){const t=r.useRef(null),o=r.useRef(!0),s=g(n);return ne(()=>{if(!t.current)return;let u=!1;return s({in:e,element:t.current,initial:o.current,isStale:()=>u}),()=>{u=!0}},[e,s]),ne(()=>(o.current=!1,()=>{o.current=!0}),[]),t}function Xe({children:e,in:n,onExited:t,onEntered:o,transition:s}){const[u,l]=r.useState(!n);n&&u&&l(!1);const d=ze({in:!!n,onTransition:c=>{const h=()=>{c.isStale()||(c.in?o==null||o(c.element,c.initial):(l(!0),t==null||t(c.element)))};Promise.resolve(s(c)).then(h,p=>{throw c.in||l(!0),p})}}),f=K(d,N(e));return u&&!n?null:r.cloneElement(e,{ref:f})}function re(e,n,t){return e?m.jsx(Ve,Object.assign({},t,{component:e})):n?m.jsx(Xe,Object.assign({},t,{transition:n})):m.jsx(Ue,Object.assign({},t))}const qe=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Je(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}let $;function Qe(e){return $||($=new ie({ownerDocument:e==null?void 0:e.document})),$}function Ye(e){const n=H(),t=e||Qe(n),o=r.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>t.add(o.current),remove:()=>t.remove(o.current),isTopModal:()=>t.isTopModal(o.current),setDialogRef:r.useCallback(s=>{o.current.dialog=s},[]),setBackdropRef:r.useCallback(s=>{o.current.backdrop=s},[])})}const ue=r.forwardRef((e,n)=>{let{show:t=!1,role:o="dialog",className:s,style:u,children:l,backdrop:d=!0,keyboard:f=!0,onBackdropClick:c,onEscapeKeyDown:h,transition:p,runTransition:E,backdropTransition:C,runBackdropTransition:O,autoFocus:M=!0,enforceFocus:T=!0,restoreFocus:j=!0,restoreFocusOptions:D,renderDialog:x,renderBackdrop:R=i=>m.jsx("div",Object.assign({},i)),manager:v,container:ce,onShow:_,onHide:G=()=>{},onExit:ae,onExited:V,onExiting:le,onEnter:de,onEntering:fe,onEntered:me}=e,he=Je(e,qe);const b=H(),y=$e(ce),a=Ye(v),Ee=Te(),ge=je(t),[B,z]=r.useState(!t),w=r.useRef(null);r.useImperativeHandle(n,()=>a,[a]),U&&!ge&&t&&(w.current=I(b==null?void 0:b.document)),t&&B&&z(!1);const X=g(()=>{if(a.add(),S.current=Y(document,"keydown",be),W.current=Y(document,"focus",()=>setTimeout(pe),!0),_&&_(),M){var i,J;const A=I((i=(J=a.dialog)==null?void 0:J.ownerDocument)!=null?i:b==null?void 0:b.document);a.dialog&&A&&!Z(a.dialog,A)&&(w.current=A,a.dialog.focus())}}),F=g(()=>{if(a.remove(),S.current==null||S.current(),W.current==null||W.current(),j){var i;(i=w.current)==null||i.focus==null||i.focus(D),w.current=null}});r.useEffect(()=>{!t||!y||X()},[t,y,X]),r.useEffect(()=>{B&&F()},[B,F]),Ie(()=>{F()});const pe=g(()=>{if(!T||!Ee()||!a.isTopModal())return;const i=I(b==null?void 0:b.document);a.dialog&&i&&!Z(a.dialog,i)&&a.dialog.focus()}),Re=g(i=>{i.target===i.currentTarget&&(c==null||c(i),d===!0&&G())}),be=g(i=>{f&&we(i)&&a.isTopModal()&&(h==null||h(i),i.defaultPrevented||G())}),W=r.useRef(),S=r.useRef(),ve=(...i)=>{z(!0),V==null||V(...i)};if(!y)return null;const q=Object.assign({role:o,ref:a.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},he,{style:u,className:s,tabIndex:-1});let L=x?x(q):m.jsx("div",Object.assign({},q,{children:r.cloneElement(l,{role:"document"})}));L=re(p,E,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:ae,onExiting:le,onExited:ve,onEnter:de,onEntering:fe,onEntered:me,children:L});let k=null;return d&&(k=R({ref:a.setBackdropRef,onClick:Re}),k=re(C,O,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:k})),m.jsx(m.Fragment,{children:ye.createPortal(m.jsxs(m.Fragment,{children:[k,L]}),y)})});ue.displayName="Modal";const un=Object.assign(ue,{Manager:ie});export{un as B,ie as M,on as a,sn as b,rn as c,N as g,tn as u};
